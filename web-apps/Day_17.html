<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Day 17</title>
	<meta name='Generator' content='Zim 0.68'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

		span.insen { color: grey                }

		.pages {
			max-width: 1000px;
			 padding-left: 320px;
		}
		.menu{
			float:left; width: 300px;
		}
		hr{clear:both;}
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <a href='./Day_16.html'>Prev</a> ]

	[ <span class='insen'>Index</span> ]

	[ <a href='./Day_18.html'>Next</a> ]
</div>

<hr />

<div class="menu">
<ul>
<li><a href="./Day_2.html" title="Day 2" class="page">Day 2</a></li>
<li><a href="./Day_3.html" title="Day 3" class="page">Day 3</a></li>
<li><a href="./Day_4.html" title="Day 4" class="page">Day 4</a></li>
<li><a href="./Day_5.html" title="Day 5" class="page">Day 5</a></li>
<li><a href="./Day_6.html" title="Day 6" class="page">Day 6</a></li>
<li><a href="./Day_7.html" title="Day 7" class="page">Day 7</a></li>
<li><a href="./Day_8.html" title="Day 8" class="page">Day 8</a></li>
<li><a href="./Day_9.html" title="Day 9" class="page">Day 9</a></li>
<li><a href="./Day_10.html" title="Day 10" class="page">Day 10</a></li>
<li><a href="./Day_11.html" title="Day 11" class="page">Day 11</a></li>
<li><a href="./Day_12.html" title="Day 12" class="page">Day 12</a></li>
<li><a href="./Day_13.html" title="Day 13" class="page">Day 13</a></li>
<li><a href="./Day_14.html" title="Day 14" class="page">Day 14</a></li>
<li><a href="./Day_15.html" title="Day 15" class="page">Day 15</a></li>
<li><a href="./Day_16.html" title="Day 16" class="page">Day 16</a></li>
<li><b>Day 17</b></li>
<li><a href="./Day_18.html" title="Day 18" class="page">Day 18</a></li>
<li><a href="./Day_19.html" title="Day 19" class="page">Day 19</a></li>
<li><a href="./Day_20.html" title="Day 20" class="page">Day 20</a></li>
<li><a href="./Day_21.html" title="Day 21" class="page">Day 21</a></li>
<li><a href="./Day_22.html" title="Day 22" class="page">Day 22</a></li>
<li><a href="./Day_23.html" title="Day 23" class="page">Day 23</a></li>
<li><a href="./Day_24.html" title="Day 24" class="page">Day 24</a></li>
<li><a href="./Day_25.html" title="Day 25" class="page">Day 25</a></li>
<li><a href="./Exam_II_Review.html" title="Exam II Review" class="page">Exam II Review</a></li>
<li><a href="./Important_Links.html" title="Important Links" class="page">Important Links</a></li>
<li><a href="./Introduction.html" title="Introduction" class="page">Introduction</a></li>
</ul>

</div>

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>Day 17 <a name='Day 17'></a></h1>
	</div>

	<div class='content'>
	<p>
Created Friday 27 March 2020
</p>

<p>
The video can be watched <a href="https://youtu.be/BOMv8bt-DQ0" title="here" class="https">here</a>.
</p>

<p>
Today's topic is <b>interrupts.</b>
</p>

<p>
He also recommends a book called the <i>Small Computer Handbook </i>for the PDP-8 computer.
</p>

<p>
Gross says he recommends people learn about the PDP-8 computer. The handbook is a great introduction to how computers actually work. It has all the details that he will be leaving out.
</p>

<p>
So then, interrupts. To understand where they came from, let us go back in history a bit. Back when computers were really machines that stored a sequence of operations. Computers way back when were mechanical machines. RAM was electromechanical. They were used for war and even a bit after.
</p>

<p>
These were sequential machines where everything was done in sequence. As machines became more common instead of just being limited to just 2 or 3 college campuses, this is where the <i>bean counters</i> came in. You could have a machine try to do output (a very very expensive machine) where it would sit there and print out output. Printing at, say, 15 characters per second. We'd have a multimillion dollar machine just sitting there doing nothing though (I didn't quite glean the exact reasoning here).
</p>

<p>
How can we keep the bean counters and some programmers happy? The answer is that we add some hardware to the machine that allows us to <b>stop a program dead in its tracks, jump to another program without telling the program it was stopped, execute for a while, and then return to the stopped programed in a such a way that it doesn't even know it was stopped.</b> We call this process an <b>interrupt. </b>
</p>

<p>
An <b>interrupt</b>, as defined by Gross, is <i>a hardware compelled subroutine call.</i> Yes! <b>Hardware!</b> Not software. We have a peripheral device capabable of sending a signal that says, "hey! I need service right now!". 
</p>

<p>
Why is this useful? Imagine is we have a printer that asks our computer for a line of text. Our computer sends it off but then it's CPU is idle while the printer does its thing. What if we were running another program and now everything is stopped dead in its tracks because we're waiting on the printer? That's a total waste! Instead, let's use an interrupt to that we can pause what we're doing, make the printer happy, and then resume what we were previously doing with no waste!
</p>

<p>
Luckily, engineers managed to figure out some clever ways to make this all happen! In between two instructions after the first is completed but before the next one, we grab the address of the one that has yet to be done. We save that address somewhere and then jump to some subroutine. We take care of the service request. And then we jump back to the address we saved.
</p>

<p>
Location 0 contains the address of an interrupt handler. Location 1 will be used to store the address of where we should return to. 
</p>

<p>
In my own words, the process works like this: The computer does stuff. Something else like a printer needs it to do something else. The computer saves the address of whatever it was currently working on and then handles whatever the printer wants (this is all part of the interrupt). Once the printer is happy, return to the saved address so we don't waste any time.
</p>

<p>
Of course, this may sound simple but there are complications in practice. Even so, the basis of the operation is exactly the same even in our much more complex computers today.
</p>

<p>
Now then, what would we have to save to restart an interupted program in such a way that it would never know that it was interrupted in the first place? Well, one answer is the registers. Which ones though? The obvious answer is <i>all of them.</i> There are problems with this approach though. It takes a long time to save all of the registers. If we have a lot of interrupts, that'll eat up the CPU. Now all our CPU time is eaten up so we can't do anything useful. As such, we should instead save all of the registers that we are going to modify. This is much faster than just saving all of the registers. 
</p>

<p>
Something else we need to save is <b>condition codes. </b>These are individual flags that indicate the status of the machine at any given time. For example, a flag might indicate that the last value loaded into a register was a 0. Just like the registers, we need to be able to save and restore these flags.
</p>

<p>
This is not all the details (we'll go into more detail in the next lecture) but it's worth in beginning to look at what's going on here. What are interrupts, why use them, where is the info that it needs stored, etc. These are all questions that the programmer has to deal with.
</p>

<p>
We are now at the 23:12 mark. Professor just changed out his camera once again.
</p>

<h3>Where do we use interrupts?</h3>

<p>
One obvious place, aside from printers, is how do we handle the issue of keeping <i>time? </i>If we have a real time clock of some sort, we're gonna have all kinds of difficulty if we are constantly manipulating that clock. We need to start it at some point and then just leave it be for a while. What if we want to measure a certain amount of time? We can set up the clock so that every, say, second we have an interupt occur. We can use it to start up or stop some process.
</p>

<p>
Where else can we use interrupts? We can get very clever with our machines such as with <i>time sharing.</i> How do we know to switch from one user to another? In some systems that are similar to time sharing systems, such as multiprogramming systems, what we do is simply let a user run until they get stuck waiting. Then we let some other user run. Now, that doesn't work so well if we have several users believe they have their own private machine. What can we do about this? Well, we can have our clock that interrupts periodically interrupt the operating system and say, "hey, it's time to switch to another user!" So then, clocks are very useful.
</p>

<p>
We can also have interrupts generated by sensors! Maybe someone turned off the lights or someone entered a classified area. Our continuous sheet of paper just tore. We have lots of uses for interrupts that lead us into many different areas.
</p>

<p>
Let's take a look back at time sharing. If we have multiple users thinking the machine is their own, how do we handle the issue of making sure everyone has memory? Maybe 10 users each require 100mb of memory. What if we only have 500mb of RAM though? We can get a little sneaky. We keep in RAM only the memory that is actually being used. We store the rest of it out on some secondary storage. This is one usage of virtual memory that requires secondary storage.
</p>

<p>
Clock interrupts can allow us to switch from one user to another.
</p>

<p>
Another usage of timed interrupts is signaling between different pieces of code. We can arrange to have different pieces of code independently scheduled. How so? Maybe round robin like in time sharing. A cicular queue you can think of (or if you played world of warcraft before and noticed how we had round robin for distributing loot). What if in the circular queue A needs to send something to P but they're not connected! This is one use of interrupts.
</p>

<p>
We can use this to create an environment known as a <i>multithreaded environment.</i> A problem Java has is that it doesn't have hardware. It simulates everything. Ouch (oof) Gross goes.
</p>

<p>
In Java, we have two constructs that are used. The <i>Thread class</i> and the <i>runnable interface.</i> Java has to simulate hardware interrupts. It does so via <b>Exceptions.</b> Exceptions are <b>simulated interrupts. </b>Exceptions <b>are not</b> used to handle interrupts. It is an interrupt request. <b>Exceptions are software similations of hardware interrupts.</b> From an exception, you get a compelled subroutine call. In C/C++, sometimes that compulsion is from software and sometimes from hardware. It's easy to think of exceptions are interrupts and leave it at that.
</p>

<p>
Now then, why do we have two different ways to get threads going in Java (Thread class and runnable interface)? A <b>thread</b> is a <b>block of code that is scheduled independently of other blocks of code. </b>This gets a bit more complicated but we won't go into that now. Let's instead go into the thread class vs runnable.
</p>

<p>
Actually, we <b>need</b> a thread class. What happens if we need to inherit both from the thread class and some other class? So, we cheat. We go to the runnable interface. As you may remember, <b>a class may implement as many interfaces as you'd like!</b> We now have multiple inheritance (inheritance from two different classes at the same time). We frequently need that. 
</p>

<p>
Now, if you look hard at the hardware of the big machines of today, you will find that one of the ways we make interrupt programming a little bit easier is that we use the concept of a <b>PSW </b>or a <b>Program Storage Word. </b>What goes there is all the basic information that you'll need to restore. Not the registers but the address of the interrupt handler, the flags to restore, the interrupt address, etc. You can look up the Intel PSW if you'd like.
</p>

<p>
If we have a lot of interrupts, life can get very interesting. Espescially if we go for software interrupts which are generated as a result of subroutine calls in your program. 
</p>

<p>
SVC has one operand: <i>which</i>. Which interrupt handler do you want? There was room for 256 (1 byte). It was a table that can contain up to 256 addresses.
</p>

<p>
For example, the easiest one was <i>SVC 10 </i>which said, "load and execute the program." Load the program, ask the scheduler to load it into the schedule, and go back to wherever you were. 
</p>

<p>
There is no real significant difference betwen software interrupts and hardware interrupts. As stated by Gross, <b>there aren't in the least bit different! </b>They should be looked at in exactly the same way.
</p>

<h3>HW</h3>

<p>
He is going to ask us to write a small program that uses threads in an email. Submit in pdf form. I recommend LaTeX to make this.
</p>

	</div>

	<br />

	<div class='page-footer'>

	</div>

	

</div>

</body>
</html>
