<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Day 10</title>
	<meta name='Generator' content='Zim 0.68'>
	<style type='text/css'>
		a          { text-decoration: none      }
		a:hover    { text-decoration: underline }
		a:active   { text-decoration: underline }
		strike     { color: grey                }
		u          { text-decoration: none;
					 background-color: yellow   }
		tt         { color: #2e3436;            }
		pre        { color: #2e3436;
					 margin-left: 20px          }
		h1         { text-decoration: underline;
					 color: #4e9a06; margin-bottom: 0 }
		h2         { color: #4e9a06; margin-bottom: 0 }
		h3         { color: #4e9a06; margin-bottom: 0 }
		h4         { color: #4e9a06; margin-bottom: 0 }
		h5         { color: #4e9a06; margin-bottom: 0 }
		p          { margin-top: 0              }
		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}
		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		.migrated-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB+AKHREFA8vJSnkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAC1klEQVRIx+2VT0hUURTGf/e958w4Tc3TYowMw1GyEgwr1MqsFmbZIrIWQZsWJUjbdoHQpl3Qps0swnCRECQFYkR/TC1iKkqmfzAKTo2Vf8hoRsfR995tkRMT87RRWkUHHhy495zvnvvu933wP/75EKkkEAjIYDCIaZpIKRFCZN0kfX9xcTGtra2/irVUEolECIfDlJeXo+s6hmFkDaCqKoZhEAqFSCaTv60pqcSyLAoLC/F4PEtqDmCaJkIIKisrMybX0sdUVRWA5ubmPzdNjjI1cpXkZC/O1fV03PXgdDqRUtpPIITAsqxsDz0Z/3CZQv8uqo4N4C8/Tp2/DdM0MiZQlvk41OTkI/LW1SGtCVb5drD3eCc71wcA+VcAHA5vDd8+3UGakxiJV7i9pdQevU5T1R35pJ3MV5QW1pf+0kWBheJ2SWua8EQXZXsu4fVVYEz1sEKvof5EuxjoPvzpcRvrdp9C2gGMx6cpOHBmbImMesds7BZubwMVDTfXDnQ3vQfK7AC8wLfExMX5whyQc3q2OEnjGm5vE76SQxsfBLr77a7CNf+n0r/l6sSMtsBSnurckiIILCobAtVZhpF4gZF4jubaymj4Ch/fd380LE7bAnjc0NPxk2yqpmEuwGxF0ag+0k5uTpzZeBeaazvj0We8fXojainsb2xh2BZgbe0gSIllzSIUh63wfQ6dZ/O2fbjcKlOj58jJ3cVENESw5yErc9nf2MLQ4jwQAkV1Lqiq37/cZ9WaahJjF9AcmxiPDhLs7ePe23oOnmUwg2hSShQle96tKDjA2HAniusgo9FxnvY9Jxw7RWzGYy92QghM00x5g53qp9sHmtB58/o2umOI2NwGolMnMYUHIb7aAyiKwsjICLqu2/qBEIKUUAohMaSHSLyBSMoPTINQ6CX5+fn2AEVFRZSUlBCPx4nFYhl3L4RESjF/GEgX3pSj+Xw+/H7/b3U/AEOZFnp7O5+5AAAAAElFTkSuQmCC)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

		span.insen { color: grey                }

		.pages {
			max-width: 1000px;
			 padding-left: 320px;
		}
		.menu{
			float:left; width: 300px;
		}
		hr{clear:both;}
	</style>
</head>
<body>

<!-- Header -->
<div class='header'>
	[ <a href='./Day_9.html'>Prev</a> ]

	[ <span class='insen'>Index</span> ]

	[ <a href='./Day_11.html'>Next</a> ]
</div>

<hr />

<div class="menu">
<ul>
<li><a href="./Day_1.html" title="Day 1" class="page">Day 1</a></li>
<li><a href="./Day_2.html" title="Day 2" class="page">Day 2</a></li>
<li><a href="./Day_3.html" title="Day 3" class="page">Day 3</a></li>
<li><a href="./Day_4.html" title="Day 4" class="page">Day 4</a></li>
<li><a href="./Day_5.html" title="Day 5" class="page">Day 5</a></li>
<li><a href="./Day_6.html" title="Day 6" class="page">Day 6</a></li>
<li><a href="./Day_7.html" title="Day 7" class="page">Day 7</a></li>
<li><a href="./Day_8.html" title="Day 8" class="page">Day 8</a></li>
<li><a href="./Day_9.html" title="Day 9" class="page">Day 9</a></li>
<li><b>Day 10</b></li>
<li><a href="./Day_11.html" title="Day 11" class="page">Day 11</a></li>
<li><a href="./Final_Review.html" title="Final Review" class="page">Final Review</a></li>
<li><a href="./Midterm_Review.html" title="Midterm Review" class="page">Midterm Review</a></li>
</ul>

</div>

<!-- Wiki content -->

<div class='pages'>
	<div class='heading'>
	<h1>Day 10 <a name='Day 10'></a></h1>
	</div>

	<div class='content'>
	<p>
Created Wednesday 06 May 2020
</p>

<h3>Memory (Chapter 6)</h3>

<p>
Today we'll be covering memory.
</p>

<p>
There are different levels of memory. It's not all just one giant monolith.<br>
<ul>
<li>Cache Memory</li>
<li>Virtual Memory</li>
<li>Memory Segmentation</li>
<li>Paging</li>
<li>Address Translation</li>
</ul>
</p>

<p>
Memory lies at the heart of the stored-program computer.<br>
We'll be focusing on memory organization.
</p>

<p>
There are two kinds of <b>main memory.</b><br>
RAM (random access memory)<br>
ROM (read only memory)
</p>

<p>
There are two types of <b>RAM</b><br>
dynamic RAM (DRAM)<br>
static RAM (SRAM)
</p>

<p>
DRAM consists of capacitors that slowly leak their charge over time. Thus, they must be regreshed every few milliseconds to prevent data loss.<br>
DRAM is 'cheap' memory owing to its simple design.
</p>

<p>
SRAM consists of circuits similar to the D flip-flop that we studied in Chapter 3.<br>
SRAM is very fast memory and it doesn't need to be refrhesed like DRAM does. It is used to build cache memory, which we will discuss in detail later.<br>
ROM also does not need to be refreshed, either. In fact, it needs very little charge to retain its memory.<br>
ROM is used to store permanent, or semi-permanent data that persists even while the system is turned off.
</p>

<p>
Generally speaking, faster memory is more expensive than slower memory.<br>
To provide the best performance at the lowest cost, memory is organized in a hierarchical fashion.<br>
Small, fast storage elements are kept in the CPU, larger slower main memory is accessed through the data bus.<br>
Large, (almost) permanent storage in the form of disk and tape drives is still further from the CPU.
</p>

<p>
We are most interested in the memory hierarchy that involves registers, cache, main memory, and virtual memory.<br>
Registers are storage locations available on the process itself.<br>
Virtual memory is typically implemented using a hard drive; it extends the address space from RAM to the hard drive.<br>
Virtual memory provides more space: Cache memory provides speed.
</p>

<p>
To access a particular piece of data, the CPU first sends a request to its nearest memory, usually cache.<br>
If the data is not in cache, then main memory is queried. If the data is not in main memory, then the request goes to disk.<br>
Once the data is located, then the data and a number of its nearby data elements are fetched into cache memory.
</p>

<p>
This leads us to some definitions:<br>
<b>hit</b> is when data if found at a given memory level.<br>
<b>miss</b> is when it is not found.<br>
<b>hit rate</b> is the percentage of time data is found at a given memory level<br>
<b>miss rate</b> is the percentage of time it is not<br>
<b>miss rate = 1 - hit rate</b><br>
<b>hit time </b>is the time required to access data at a given memory level.<br>
<b>miss penalty</b> is the time required to process a miss, including the time that it takes to replace a block of memory plus the time it takes to deliever the data to the processor.
</p>

<p>
An entire block of data is copied after a hit because the <i>principle of locality</i> tells us that once a byte is accessed, it's likely that a nearby data element will be needed soon.
</p>

<p>
There are three forms of locality:<br>
<ul>
<li><b>Temporal locality</b>: Recently-accessed data elements tend to be accessed again.</li>
<li><b>Spatial locality: </b>Accesses tend to cluster</li>
<li><b>Sequential locality: </b>Instructions tend to be accessed sequentially.</li>
</ul>
</p>

<h3>Cache Memory</h3>

<p>
The purpose of cache memory is to speed up accesses by storing recently used data closer to the CPU, instead of storing it in main memory.<br>
Although cache is much smaller than main memory, its access time is a fraction of that of main memory.<br>
Unlike main memory, <i>which is accessed by address</i>, cache is typically accessed by <b>content</b>; hence, it is often called <i>content addressable memory.</i><br>
Because of this, a single large cache memory isn't always desirable — it takes longer to search.
</p>

<p>
The simplest cache mapping scheme is <b>direct mapped cache.</b><br>
In a <b>direct mapped cache</b> consisting of N blocks of cache, block X of main memory maps to cache block Y = X mod N.<br>
Thus, if we have 10 blocks of cache, block 7 of cache may hold blocks 7, 17, 27, 37, ... of main memory.
</p>

<p>
To perform direct mapping, the binary main memory address is partitioned into the fields shown below:<br>
<ul>
<li>The <i>offset field </i>uniquely identifies an address within a specific block</li>
<li>The <i>block field</i> selects a unique block of cache.</li>
<li>The <i>tag field</i> is whatever is left over.</li>
</ul>
</p>

<p>
|	Tag		|	Block	|	Offset	|<br>
←	   Bits in main memory address    →	
</p>

<p>
The sizes of these fields are determined by characteristics of both memory and cache.
</p>

<p>
Consider a byte-addressable main memory consisting of 4 blocks, and a cache with 2 blocks, where each block is 4 bytes.<br>
This means Block 0 and 2 of main memory map to Block 0 of cache, and Blocks 1 and 3 of main memory map to Block 1 of cache.<br>
Using the tag, block, and offset fields, we can see how main memory maps to cache as follows:
</p>

<p>
First, we need to determine the address format for mapping.<br>
Each block is 4 bytes, so the offset field must contain 2 bits; there are 2 blocks in cache, so the block field must contain 1 bit; this leaves 1 bit for the tag (as a main memory address has 4 bits because there are a total of 2<sup>4</sup> = 16 bytes).<br>
|	1		|	1		|	2		|<br>
|	Tag		|	Block	|	offset	|<br>
← Main memory format →	
</p>

<p>
Suppose we need to access main memory address 3<sub>16</sub> (0x0011 in binary). If we partition 0x0011 using the address format we get the following:<br>
Thus, the main memory address 0x0011 maps to cache block 0.<br>
Bottom figure shows this mapping, along with the tag that is also stored with the data.<br>
<i>slide 19</i>
</p>

<p>
Direct mapped cache maps main memory blocks in a modular fashion to cache blocks. The mapping depends on:<br>
<ul>
<li>The number of bits in the main memory address (how many addresses exist in main memory).</li>
<li>The number of blocks are in cache (which determines the size of the block field)</li>
<li>How many addresses (either bytes of words) are in a block (which determines the size of the offset field).</li>
</ul>
</p>

<p>
Suppose instead of placing memory blocks in <b>specific cache locations</b> based on memory address, we could allow a block to go <i>anywhere</i> in cache.<br>
In this way, cache would have to fill up before any blocks are evicted.<br>
This is how <b>fully associative</b> cache works.<br>
A memory address is partitioned into only <b>two</b> fields: the <b>tag</b> and the <b>offset</b>.
</p>

<p>
Suppose, as before, we have a 14-bit memory addresses and a cache with 16 blocks, each block of size 8. The field format of a memory reference is:
</p>

<p>
|	11 bits	|	3 bits	|<br>
|	Tag		|	Offset	|<br>
←	       14 bits                 →	
</p>

<p>
When the cache is searched, all tags are searched in parallel to retrieve the data quickly.<br>
This require special, costly hardware.
</p>

<p>
Direct mapped cache evicts a block whenever another memory reference needs that block.<br>
With fully associative cache, we have no such mapping, thus we must devise an algorithm to determine which block to evict from the cache.<br>
The block that is evicted is the <b>victim block.</b><br>
There are a number of ways to pick a victim.
</p>

<p>
Most of today's small systems employ multilevel cache hierarchies.<br>
The levels of cache form their own small memory hierarchy.<br>
Level 1 cache (8kb to 64kb) is situated on the processor itself.<br>
<div style='padding-left: 30pt'>
Access time is typically about 4ns.
</div>
Level 2 cache (64kb to 2mb) may be on the motherboard, or on an expansion card.<br>
<div style='padding-left: 30pt'>
Access time is usually around 15-20ns.
</div>
</p>

<p>
If the cache system used in inclusive cache, the same data may be present at multiple levels of cache.<br>
<b>Strictly inclusive</b> caches guarantee that all data in a smaller cache also exists at the next higher level.<br>
<b>Exclusive caches</b> permit only one copy of the data.<br>
The tradeoffs in choosing on eover the other involve weighing the variables of access time, memory size, and circuit complexity.
</p>

<h3>Final</h3>

<p>
From 6 to 8:30 on the 20th. We do have one last class next week. Questions are pretty much just the homework. Replace chapter 4 with the MIPS stuff we did.
</p>

	</div>

	<br />

	<div class='page-footer'>

	</div>

	

</div>

</body>
</html>
